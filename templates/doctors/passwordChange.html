{% extends 'users/base.html' %}
{% load static %}

{% block title %} Change Password {% endblock title %}
{% block page_title %} Change Password {% endblock page_title %}

{% block content %}
<main>
  <section class="profile-section">
    <div class="container">
      <div class="profile-card">
        <div class="row justify-content-center">
          <h2 class="text-center mb-4">Change Password</h2>

          <div class="col-12 col-md-6 shadow-sm rounded-lg p-4">
            <form method="POST">
              {% csrf_token %}

              {% if updated_password_successfully %}
              <div class="alert alert-success alert-dismissible fade show" role="alert">
                Password updated successfully!
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
              </div>
              {% endif %}

              {% if messages %}
              <div class="alert alert-danger" role="alert">
                {% for message in messages %}
                  {{ message }}
                {% endfor %}
              </div>
              {% endif %}

              
              <div class="form-group mb-4">
                <label for="current_password" class="fw-bold">Current Password</label>
                <div class="input-group">
                  <input type="password" class="form-control {% if form.current_password.errors %}is-invalid{% endif %}" name="current_password" placeholder="Current Password" id="current_password" required autofocus/>
                  <span class="input-group-text" id="toggleCurrentPassword" style="cursor: pointer;">
                    <i class="bi bi-eye"></i>
                  </span>
                </div>
              </div>

           
              <div class="form-group mb-4">
                <label for="new_password" class="fw-bold">New Password</label>
                <div class="input-group">
                  <input type="password" class="form-control {% if form.new_password.errors %}is-invalid{% endif %}" name="new_password" placeholder="New Password" id="new_password" required/>
                  <span class="input-group-text" id="toggleNewPassword" style="cursor: pointer;">
                    <i class="bi bi-eye"></i>
                  </span>
                </div>
              </div>

             
              <div class="form-group mb-4">
                <label for="confirm_new_password" class="fw-bold">Confirm New Password</label>
                <div class="input-group">
                  <input type="password" class="form-control {% if form.confirm_new_password.errors %}is-invalid{% endif %}" name="confirm_new_password" placeholder="Confirm New Password" id="confirm_new_password" required />
                  <span class="input-group-text" id="toggleConfirmPassword" style="cursor: pointer;">
                    <i class="bi bi-eye"></i>
                  </span>
                </div>
              </div>

            
              <div class="form-group">
                <button type="submit" class="btn btn-secondary w-100 py-2" name="update_password">
                  Change Password
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">

<script>
  document.getElementById("toggleCurrentPassword").addEventListener("click", function() {
    var currentPassword = document.getElementById("current_password");
    currentPassword.type = (currentPassword.type === "password") ? "text" : "password";
  });

  document.getElementById("toggleNewPassword").addEventListener("click", function() {
    var newPassword = document.getElementById("new_password");
    newPassword.type = (newPassword.type === "password") ? "text" : "password";
  });

  document.getElementById("toggleConfirmPassword").addEventListener("click", function() {
    var confirmPassword = document.getElementById("confirm_new_password");
    confirmPassword.type = (confirmPassword.type === "password") ? "text" : "password";
  });
</script>

<link rel="stylesheet" href="{% static 'css/passwordChange.css' %}">

{% endblock %}
